import { Record as PostRecord } from "../lexicons/types/app/bsky/feed/post";

export const LanguageCodes = {
  Afrikaans: "af",
  Albanian: "sq",
  Amharic: "am",
  Arabic: "ar",
  Armenian: "hy",
  Azerbaijani: "az",
  Basque: "eu",
  Belarusian: "be",
  Bengali: "bn",
  Bosnian: "bs",
  Bulgarian: "bg",
  Catalan: "ca",
  Chinese: "zh",
  Croatian: "hr",
  Czech: "cs",
  Danish: "da",
  Dutch: "nl",
  English: "en",
  Esperanto: "eo",
  Estonian: "et",
  Filipino: "tl",
  Finnish: "fi",
  French: "fr",
  Galician: "gl",
  Georgian: "ka",
  German: "de",
  Greek: "el",
  Gujarati: "gu",
  Hebrew: "he",
  Hindi: "hi",
  Hungarian: "hu",
  Icelandic: "is",
  Indonesian: "id",
  Irish: "ga",
  Italian: "it",
  Japanese: "ja",
  Javanese: "jv",
  Kannada: "kn",
  Kazakh: "kk",
  Khmer: "km",
  Korean: "ko",
  Kurdish: "ku",
  Lao: "lo",
  Latvian: "lv",
  Lithuanian: "lt",
  Macedonian: "mk",
  Malay: "ms",
  Malayalam: "ml",
  Maltese: "mt",
  Maori: "mi",
  Marathi: "mr",
  Mongolian: "mn",
  Nepali: "ne",
  Norwegian: "no",
  Pashto: "ps",
  Persian: "fa",
  Polish: "pl",
  Portuguese: "pt",
  Punjabi: "pa",
  Romanian: "ro",
  Russian: "ru",
  Serbian: "sr",
  Sinhala: "si",
  Slovak: "sk",
  Slovenian: "sl",
  Somali: "so",
  Spanish: "es",
  Sundanese: "su",
  Swahili: "sw",
  Swedish: "sv",
  Tamil: "ta",
  Telugu: "te",
  Thai: "th",
  Turkish: "tr",
  Ukrainian: "uk",
  Urdu: "ur",
  Uzbek: "uz",
  Vietnamese: "vi",
  Welsh: "cy",
  Xhosa: "xh",
  Yiddish: "yi",
  Yoruba: "yo",
  Zulu: "zu",
} as const;

export type Language = keyof typeof LanguageCodes;
export type LanguageCode = (typeof LanguageCodes)[Language];

// Optimized creation of regex objects
export const LanguageRegex = {
  Afrikaans: /af/,
  Albanian: /sq/,
  Amharic: /am/,
  Arabic: /ar/,
  Armenian: /hy/,
  Azerbaijani: /az/,
  Basque: /eu/,
  Belarusian: /be/,
  Bengali: /bn/,
  Bosnian: /bs/,
  Bulgarian: /bg/,
  Catalan: /ca/,
  Chinese: /zh/,
  Croatian: /hr/,
  Czech: /cs/,
  Danish: /da/,
  Dutch: /nl/,
  English: /en/,
  Esperanto: /eo/,
  Estonian: /et/,
  Filipino: /tl/,
  Finnish: /fi/,
  French: /fr/,
  Galician: /gl/,
  Georgian: /ka/,
  German: /de/,
  Greek: /el/,
  Gujarati: /gu/,
  Hebrew: /he/,
  Hindi: /hi/,
  Hungarian: /hu/,
  Icelandic: /is/,
  Indonesian: /id/,
  Irish: /ga/,
  Italian: /it/,
  Japanese: /ja/,
  Javanese: /jv/,
  Kannada: /kn/,
  Kazakh: /kk/,
  Khmer: /km/,
  Korean: /ko/,
  Kurdish: /ku/,
  Lao: /lo/,
  Latvian: /lv/,
  Lithuanian: /lt/,
  Macedonian: /mk/,
  Malay: /ms/,
  Malayalam: /ml/,
  Maltese: /mt/,
  Maori: /mi/,
  Marathi: /mr/,
  Mongolian: /mn/,
  Nepali: /ne/,
  Norwegian: /no/,
  Pashto: /ps/,
  Persian: /fa/,
  Polish: /pl/,
  Portuguese: /pt/,
  Punjabi: /pa/,
  Romanian: /ro/,
  Russian: /ru/,
  Serbian: /sr/,
  Sinhala: /si/,
  Slovak: /sk/,
  Slovenian: /sl/,
  Somali: /so/,
  Spanish: /es/,
  Sundanese: /su/,
  Swahili: /sw/,
  Swedish: /sv/,
  Tamil: /ta/,
  Telugu: /te/,
  Thai: /th/,
  Turkish: /tr/,
  Ukrainian: /uk/,
  Urdu: /ur/,
  Uzbek: /uz/,
  Vietnamese: /vi/,
  Welsh: /cy/,
  Xhosa: /xh/,
  Yiddish: /yi/,
  Yoruba: /yo/,
  Zulu: /zu/,
} as const;

export function hasLanguage(post: PostRecord, language: Language): boolean {
  return Boolean(!post.langs?.length || post.langs?.find((value) => value.match(LanguageRegex[language])));
}
